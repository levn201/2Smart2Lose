@page
@model Smart2Lose.Pages.Admin.UserModel
@{
    ViewData["Title"] = "Kahoot | User ";
}

<link rel="stylesheet" href="~/css/Admin/User.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/Admin/GrundDashboard.css" asp-append-version="true" />

<!-- Header -->
<header class="header">
    <div class="logo">@Model.pn.Name</div>
    <nav class="nav-links">
        <a href="/Admin/Dashboard">Dashboard</a>

        @if (User.IsInRole("Admin"))
        {
            <a href="/Admin/User">User</a>
        }
        @if (User.IsInRole("Admin") || User.IsInRole("User") || User.IsInRole("ReadOnly"))
        {
            <a href="/Admin/Frageboegen" class="active">Fragebögen</a>
        }
        @if (User.IsInRole("Admin") || User.IsInRole("User"))
        {
            <a href="/Admin/FrageboegenErstellen">Neue anlegen</a>
        }

        <a href="/Index">Quit</a>
    </nav>
</header>

<!-- User Tabelle -->
<div class="main-content">
    <table class="user-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Benutzername</th>
                <th>Passwort</th>
                <th>Role</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model.UserList)
            {   
                <tr>
                    <td>@user.ID</td>
                    <td>@user.Username</td>
                    <td>@user.Password</td>
                    <td>@user.Role</td>
                    <td>
                        <form method="post" asp-page-handler="Loeschen" style="display:inline;">
                            <input type="hidden" name="id" value="@user.ID" />
                            <button type="submit">🗑️</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Neues Benutzerformular -->
<div class="main-content">
    <h2>Neuen Benutzer anlegen</h2>

    <form method="post">
        <label>Benutzername:</label>
        <input type="text" asp-for="U.Username" placeholder="Benutzernamen eingeben" />

        <label>Passwort:</label>
        <input type="password" asp-for="U.Password" placeholder="Passwort eingeben" />

        <label>Rolle wählen:</label>
        <select asp-for="U.Role">
            <option value="">Bitte wählen</option>
            <option value="Admin">Admin</option>
            <option value="Creater">Creater</option>
        </select>

        <button type="submit">Benutzer speichern</button>
    </form>

    @if (!string.IsNullOrEmpty(Model.Message))
    {
        <p class="message">@Model.Message</p>
    }
</div>